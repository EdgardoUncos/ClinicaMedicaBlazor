@page "/register"
@using ClinicaMedica.Shared.Models
@inject HttpClient Http
@inject NavigationManager Nav
@inject IJSRuntime JS

<PageTitle>Login</PageTitle>

<input placeholder="Usuario" @bind-value=usuario.NombreUsuario />
<input placeholder="Password" @bind-value=usuario.Password />
<button class="btn btn-primary" @onclick="Loguear">Login</button>

@code {
    private LoginUsuario usuario = new LoginUsuario();
    string token = "";

    async Task Loguear()
    {
        var resultado = await Http.PostAsJsonAsync("Usuarios/Login", usuario);
        token = await resultado.Content.ReadAsStringAsync();
        Console.WriteLine(token);

    }

    private async Task GuardarSesion()
    {
        await JS.InvokeVoidAsync("localStorage.setItem", "Token", token);
    }

    private async Task ObtenerUsuario()
    {
        token = await JS.InvokeAsync<string>("localStorage.getItem", "Token");
        Console.WriteLine(token);
    }

}
